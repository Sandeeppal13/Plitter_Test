<br>
<div class="container" style="background-color:cadetblue"> 
  <div class="row">
    <!-- to do @sriram -->
    <div class="col-sm-6">
      <div id="annotator-progress-bar">
        <b>Annotator Log:</b>
        <div class="row">
          <div class="col-sm-3"><b>Submitted:</b> <b id="submitted-count"></b></div>
          <div class="col-sm-3"><b>Rejected:</b> <b id="rejected-count"></b></div>
          <div class="col-sm-3"><b>Raised:</b> <b id="raised-count"></b></div>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <!-- <div id="progress-bar">
        <label for="file">Annotation progress:</label><br>
      </div> -->
    </div>
    <div class="col-sm-3">
      <!-- <div style="float: right;" >
        <b>Annotators live: </b> <br> <div id="live-count"><img src="./icons/person-icon.png" height="24" width="24"></div>
      </div> -->
    </div>
  </div>
</div>
<!-- <br> -->
<div class="container" style="background-color:cadetblue">
  <!--  cadetblue -->
  <div class="row" id="ann-con">
    <div class="col-sm-8">

      <div id="ann-page-container" style="display:none;">
        <!-- <div id="ann-container"> -->
          <!-- <div id="toolbar" /> -->
          <div id="openseadragon" />
        <!-- </div> -->
      </div>

      <div id="splash-container">
          <div class="row">
            <div class="col-md-6">
              <img src="../icons/favicon.png" height="300px">
            </div>
            <div class="col-md-6">
              <br />
              <h1><strong>What is pLitter?</strong></h1>
              <br />
              pLitter (Plastic litter) is a standardized, deep learning-friendly
              image dataset and pre-trained model for roadside plastic litter
              identification. The dataset includes images of plastic littered scenes
              and annotations in <a href="https://cocodataset.org/">COCO</a> format.<br />
              <br /> <strong>The main features of the dataset are:</strong>
              <br /> object detection
              <br /> 10,000+ images
              <br /> 50,000+ object instances
              <br /> 4 object categories (Face mask, Pile, Plastic, Trash bin)
            </div>
          </div>
          
          <br /> We are using the Citizen Science approach to expand the pLitter taxonomy to more categories. Help us make it better.
        <div id="splash-body-container">
          <button onclick="getStarted()">Get Started!</button> 
        </div>
      </div>

    </div>
    <div class="col-sm-4">
      <div id="info">
        <div id='info-tab-container'>
          <span id="task-tab" class="tab-header">Task</span>
          <span id="tutorial-tab" class="tab-header">Tutorial</span>
        </div>
        <div id="info-content"></div>
      </div>  
    </div>
  </div>
</div>

<script>
  function getStarted() {
    load_random();
    document.getElementById("ann-page-container").style.display = "";
    document.getElementById("splash-container").style.display = "none";
    console.log("getting started...");
  }
</script>

  <script>
    let taskHTML = `
        <h5><strong>Can you spot any pieces of plastic?</strong></h5>
        
        We have already asked our AI to offer some suggestions. 
        
        <h5><strong>Are you sure it is plastic?  </strong></h5>
        
        Zoom in <img class="text-icon" src="./icons/openseadragon/zoomin_rest.png" alt="+"/> and zoom out <img class="text-icon" src="./icons/openseadragon/zoomout_rest.png" alt="-"/> to see the object(s) more clearly.
        
        <h5><strong> Did you spot something? What’s next? </strong></h5>

        Excellent! Draw a rectangle over it using <img class="text-icon" src="./icons/openseadragon/rect.png" alt="ractangle"/> and see if you can identify the plastic type.
        Our AI suggestions could be wrong (after all it is a machine). Feel free to edit or change the plastic category type or even delete them if you do not believe the object(s) are plastic. 

        <h5><strong> is it too hard to notice anything? </strong></h5>

        You have 2 options! Sometimes the image could be blurry and it is hard to detect anything. Please flag the image using <img class="text-icon" src="./icons/openseadragon/bookmark.png" alt="raise"> so that our team can have a look. If you simply want a different image to annotate, please click <img class="text-icon" src="./icons/openseadragon/ignore.png" alt="ignore" /> to send the photo to another user.

        <h5><strong> Do you want to start with a clean slate? </strong></h5>
        
        Click <img class="text-icon" src="./icons/openseadragon/reload.png" alt="refresh" /> to go back to the original image and start from initial landing image. 
        
        <h5><strong> Have you identified all plastics in the image? </strong></h5>

        Great! That’s what we strive for — a world with less plastic. Click on the <img class="text-icon" src="./icons/openseadragon/save.png" alt="save" /> to save the annotations and load a new image. 
      `;

    let tutorialHTML = `
        <h5><strong>Tutorial</strong></h5>
  
        Have a careful look, the + and - buttons might help you.
  
        <strong>Spotted something?</strong>
        <ul>
          <li>If it looks like litter or plastic, <strong>Tag it!</strong> by drawing a rectange
            using the rectangular drawing option, then select an option from the pop up list and press 'return'
            or click <strong>OK</strong></li>
        </ul>
  
        <strong>Can't find any litter?</strong>
        <ul>
          <li>No worries! This is also valuable to know, there may be a few of those. Just click <strong>done</strong>?.
          </li>
        </ul>
      `;

    document.getElementById("info-content").innerHTML = taskHTML;

    document.getElementById("task-tab").addEventListener("click", () => {
      document.getElementById("info-content").innerHTML = taskHTML;
    });

    document.getElementById("tutorial-tab").addEventListener("click", () => {
      document.getElementById("info-content").innerHTML = tutorialHTML;
    });

  </script>

  <script>
    $("#task-tab").click(function(e){
      $(".tab-header").css("color", "gray");
      $("#task-tab").css("color", "black");
    });
    $("#tutorial-tab").click(function(e){
      $(".tab-header").css("color", "gray");
      $("#tutorial-tab").css("color", "black");
    });
    $(document).ready(
      () => $("#task-tab").css("color", "black")
    )
  </script>

<style>

  .tab-header {
    font-size: 24px;
    font-weight: 800;
    color: gray;
  }
  .tab-header:hover {
    color:burlywood;
    cursor: pointer
  }
  .container {
    padding-top: 10px;
  }
  .text-icon {
    height: 20;
    width: 20;
  }

  #splash-container {
    float: left;
    width: 100%;
    box-shadow: 0 4px 8px 0 rgb(0 0 0 / 20%), 0 6px 20px 0 rgb(0 0 0 / 19%);
    background-color: white;
    height: 500px;
    display: flex;
    justify-content: space-around;
    flex-direction: column;
    align-content: space-around;
    padding: 20px;
    text-align: center;
  }

  #ann-con{
    padding-bottom: 25px;
  }

  #info-tab-container {
    height: 60px;
    border-bottom: 2px solid #4CAF50;
    padding: 10px;
    margin: 10px;
    display: flex;
    flex-direction: row;
    justify-content: space-around;
  }

  #info {
    /* float: right; */
    /* width: 30%; */
        background-color: white;
        color: black;
        /* border: 2px solid #4CAF50; */
        /* border-radius: 10%; */
        padding: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        height: 500px;
  /* box-shadow: 10px 10px 5px grey; */
  }

  #info-content {
        height: 400px;
        overflow-y: scroll;
        font-size: 12px;
  }

  #ann-container {
    float: left;
    width: 100%;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    background-color: white;
  }

  #annotator-progress-bar {
    color: white;
  }

    button {
        /* left: 50%; */
        width: 100px;
        background-color: white;
        color: black;
        border: 2px solid #4CAF50;
        margin: 10px;
    }

    button:hover {
        background-color: #4CAF50;
        transition: background-color 0.3s;
        color: white;
    }

    .a9s-toolbar-btn svg path {
      stroke-width: 1px;
    }

    .button-save:hover {
        background-color: #4CAF50;
        color: white;
    }

    .tagselector-widget {
        padding:5px;
        border-bottom:1px solid #e5e5e5;
    }
    /* .box {
        stroke-width: 2;
        fill: none;
        stroke: red;
    }
    .label {
        font-size: 20px;
        fill: white;
        text-anchor: middle;
    }
    .label-rect {
        fill: white;
    } */
</style>


<style>
    #toolbar {
      margin-bottom:10px;
    }
    
    .openseadragon-canvas {
      outline:none; 
      background-color:#f4f4f4 !important;
      border-radius:3px;
    }

    #openseadragon {
      height:500px;
      width:100%;
    }

    @media only screen and (max-width: 800px) {

      .r6o-editor {
        width:260px !important;
      }

    }
  </style>


<!-- <script>

var viewer = OpenSeadragon({
    id: "openseadragon",
    prefixUrl: "./icons/openseadragon/",
    tileSources: {
    type: "image",
    url: ''
    },
    gestureSettingsTouch: {
    pinchRotate: true
    }
});

viewer.addHandler('open', () => {
    let reloadButton = new OpenSeadragon.Button({
      tooltip: 'Reload',
      srcRest: `./icons/openseadragon/reload.png`,
      srcGroup: `./icons/openseadragon/reload.png`,
      srcHover: `./icons/openseadragon/reload.png`,
      srcDown: `./icons/openseadragon/reload.png`,
      onClick: () => {console.log('refresh'); load_random()},
    });
    viewer.addControl(reloadButton.element, { anchor: OpenSeadragon.ControlAnchor.TOP_LEFT });
});

// get_dataset_stats()
// make_live()
// setInterval(function(){ 
//   get_dataset_stats()
//   make_live()
//  }, 15000);


    let flagButton = document.createElement("button");
            flagButton.id = 'button-flag';
            flagButton.className = "a9s-toolbar-btn";
            flagButton.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                <path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path>
                </svg>`;
            flagButton.addEventListener('click', function() { flag_image(image_id); });
            
    let reloadButton = document.createElement("button");
            reloadButton.id = 'button-reload';
            reloadButton.className = "a9s-toolbar-btn";
            reloadButton.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                    <path d="M26.47 9.53C24.3 7.35 21.32 6 18 6 11.37 6 6 11.37 6 18s5.37 12 12 12c5.94 0 10.85-4.33 11.81-10h-3.04c-.91 4.01-4.49 7-8.77 7-4.97 0-9-4.03-9-9s4.03-9 9-9c2.49 0 4.71 1.03 6.34 2.66L20 16h10V6l-3.53 3.53z" />
                </svg>`;
            reloadButton.addEventListener('click', load_random);

            let saveButton = document.createElement("button");
            saveButton.id = 'button-save';
            saveButton.className = "a9s-toolbar-btn";
            saveButton.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                    <path d="M13.5 24.26L7.24 18l-2.12 2.12 8.38 8.38 18-18-2.12-2.12z" />
                </svg>`
            saveButton.addEventListener('click', function () { save_annots_to_coco(image_id); });

            let rejectButton = document.createElement("button");
            rejectButton.id = 'button-reject';
            rejectButton.className = "a9s-toolbar-btn";
            rejectButton.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
                    <path d="M18 3C9.71 3 3 9.71 3 18s6.71 15 15 15 15-6.71 15-15S26.29 3 18 3zm7.5 20.38l-2.12 2.12L18 20.12l-5.38 5.38-2.12-2.12L15.88 18l-5.38-5.38 2.12-2.12L18 15.88l5.38-5.38 2.12 2.12L20.12 18l5.38 5.38z"/>
                </svg> `;
            // TODO: persist the rejected list with cookies
            rejectButton.addEventListener('click', function () { rejectedList.push(image_id) });

            // document.getElementById('toolbar').prepend(flagButton)
            // document.getElementById('toolbar').prepend(saveButton)
            // document.getElementById('toolbar').prepend(reloadButton)
            // document.getElementById('toolbar').prepend(rejectButton)

            // document.getElementsByClassName('a9s-toolbar')[0].prepend(saveButton);
            // document.getElementsByClassName('a9s-toolbar')[0].prepend(reloadButton);
            // document.getElementsByClassName('a9s-toolbar')[0].prepend(rejectButton);
</script> -->
<!-- <iframe id="frame" src="http://203.159.29.187:8080" onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));' style="height:500px;width:150%;border:none;overflow:hidden;"></iframe> -->
<!--<iframe id="frame" src="http://203.159.29.187:8002" onload='javascript:(function(o){o.style.height=o.contentWindow.document.body.scrollHeight+"px";}(this));' style="height:500px;width:150%;border:none;overflow:hidden;"></iframe>-->